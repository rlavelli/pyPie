
# coding: utf-8

# ## Read Data

# In[2]:


import csv
f = open("guns.csv", "r")
csvreader = csv.reader(f)
data = list(csvreader)
print(data[0:5])


# In[3]:


headers = data[0]
data = data[1:]
print(headers)
print(data[0:5])


# ## Count by Year

# In[4]:


years = [row[1] for row in data]
year_counts = {}
for year in years:
    if year in year_counts:
        year_counts[year] += 1
    else:
        year_counts[year] = 1
year_counts


# ## Count by Date

# In[5]:


import datetime
dates = [datetime.datetime(year=int(row[1]), month=int(row[2]), day=1) for row in data]
dates[:5]


# In[6]:


date_counts = {}

for date in dates:
    if date not in date_counts:
        date_counts[date] = 0
    date_counts[date] += 1
date_counts


# ## Sex and Race

# In[7]:


sex_counts = {}
sexs = [row[5] for row in data]
for sex in sexs:
    if sex in sex_counts:
        sex_counts[sex] += 1
    else:
        sex_counts[sex] = 1
sex_counts


# In[8]:


race_counts = {}
races = [row[7] for row in data]
for race in races:
    if race in race_counts:
        race_counts[race] += 1
    else:
        race_counts[race] = 1
race_counts


# -  A/B test per verificare differenze significative fra razze
# -  BarPlot M/F e Razze
# -  Approfondimento categorie, quali sono i totali?
# -  LinePlot nel tempo dei totali

# ## Import Data

# In[9]:


with open("census.csv", "r") as f:
    reader = csv.reader(f)
    census = list(reader)
census[1]


# In[10]:


mapping = {
    "Asian/Pacific Islander": 674625+15159516,
    "Native American/Native Alaskan": 3739506,
    "Black": 40250635,
    "Hispanic": 44618105,
    "White": 197318956
}
race_per_hundredk = {}
for race in race_counts:
    race_per_hundredk[race] = race_counts[race]/mapping[race] * 100000
race_per_hundredk


# In[15]:


intents = [row[3] for row in data]
races = [row[7] for row in data]
homicide_race_counts = {}
for i, race in enumerate(races):
    if intents[i] == "Homicide":
        if race not in homicide_race_counts:
            homicide_race_counts[race] = 1
        else:
            homicide_race_counts[race] += 1
homicide_race_counts

race_per_hundredk = {}
for race in homicide_race_counts:
    race_per_hundredk[race] = homicide_race_counts[race]/mapping[race] * 100000
race_per_hundredk


# In[ ]:


-  Indagare alta percentuale in alcune

